{"version":3,"sources":["pages/Auth/index.js"],"names":["Auth","props","React","useState","isLogin","setIsLogin","error","setError","className","onSubmitLogin","data","client_email","client_mdp","axios","post","email","password","then","status","sessionStorage","setItem","token","setTimeout","history","push","window","location","reload","catch","onSubmitSignin","datas","console","log","client_nom","firstname"],"mappings":"kMAsEeA,UA9Df,SAAcC,GACZ,MAA8BC,IAAMC,UAAS,GAA7C,mBAAOC,EAAP,KAAgBC,EAAhB,KAwCA,EAA0BH,IAAMC,SAAS,IAAzC,mBAAOG,EAAP,KAAcC,EAAd,KAEA,OACE,qBAAKC,UAAU,OAAf,SAEIJ,EACE,cAAC,IAAD,CACEI,UAAU,QACVC,cA9CY,SAACC,GAIrB,IAAQC,EAA6BD,EAA7BC,aAAcC,EAAeF,EAAfE,WACtBC,IAAMC,KAAK,kBAAmB,CAAEC,MAAOJ,EAAcK,SAAUJ,IAC5DK,MAAK,YAAe,IAAZP,EAAW,EAAXA,KACa,YAAhBA,EAAKQ,SACPC,eAAeC,QAAQ,QAASV,EAAKW,OACrCC,YAAW,WACTrB,EAAMsB,QAAQC,KAAK,WACnBC,OAAOC,SAASC,QAAO,KACtB,SAGNC,OAAM,WACLrB,EAAS,CAAC,eAAgB,mBA+BhBH,UAASC,aAAYC,QAAOC,aAEpC,cAAC,IAAD,CACEC,UAAU,SACVqB,eA/Ba,SAACC,GACtBC,QAAQC,IAAI,oBACZ,IAAQC,EAAyCH,EAAzCG,WAAYrB,EAA6BkB,EAA7BlB,WAAYD,EAAiBmB,EAAjBnB,aAChCE,IAAMC,KAAK,mBAAoB,CAC7BoB,UAAWD,EACXlB,MAAOJ,EACPK,SAAUJ,IAETK,MAAK,YAAe,IAAZP,EAAW,EAAXA,KACa,YAAhBA,EAAKQ,QACPjB,EAAMsB,QAAQC,KAAd,8BAA0Cd,EAAKK,WAGlDa,OAAM,SAACtB,GACNyB,QAAQC,IAAI,CAAE1B,cAkBJF,UAASC,aAAYC,QAAOC","file":"static/js/12.352b3220.chunk.js","sourcesContent":["import React from 'react';\nimport {\n  Login,\n  Signin,\n} from '../../components'\nimport './statics/css/Login.css';\nimport axios from 'axios';\n\nfunction Auth(props) {\n  const [isLogin, setIsLogin] = React.useState(true);\n\n  const onSubmitLogin = (data) => {\n    // if (props.history.location.pathname !== '/') {\n    //   props.history.push('/');\n    // }\n    const { client_email, client_mdp } = data;\n    axios.post('/api/user/login', { email: client_email, password: client_mdp })\n      .then(({ data }) => {\n        if (data.status === 'success') {\n          sessionStorage.setItem('token', data.token);\n          setTimeout(() => {\n            props.history.push('/Lecons');\n            window.location.reload(false);\n          }, 1000)\n        }\n      })\n      .catch(() => {\n        setError(['client_email', 'client_mdp'])\n      })\n  }\n\n  const onSubmitSignin = (datas) => {\n    console.log('onSubmitSignin()');\n    const { client_nom, client_mdp, client_email } = datas;\n    axios.post('/api/user/signup', { \n      firstname: client_nom,\n      email: client_email, \n      password: client_mdp,\n    })\n      .then(({ data }) => {\n        if (data.status === 'success') {\n          props.history.push(`/Confirmation?email=${data.email}`);\n        }\n      })\n      .catch((error) => {\n        console.log({ error })\n      })\n  }\n\n  const [error, setError] = React.useState([]);\n\n  return (\n    <div className=\"Auth\">\n      {\n        isLogin ?\n          <Login\n            className='Login'\n            onSubmitLogin={onSubmitLogin}\n            {...{ isLogin, setIsLogin, error, setError }}\n          /> :\n          <Signin\n            className='Singin'\n            onSubmitSignin={onSubmitSignin}\n            {...{ isLogin, setIsLogin, error, setError }}\n          />\n      }\n    </div>\n  )\n}\n\nexport default Auth\n"],"sourceRoot":""}